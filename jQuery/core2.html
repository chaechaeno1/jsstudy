<!DOCTYPE html>
<meta charset="UTF-8">

<body>
    <div class="mch">ë¯¼ì±„ í—¤ì–´ìŠ¤íƒ€ì¼ ê³ ì¹¨1</div>
    <div class="mch">ë¯¼ì±„ í—¤ì–´ìŠ¤íƒ€ì¼ ê³ ì¹¨2</div>
    <div class="mch">ë¯¼ì±„ í—¤ì–´ìŠ¤íƒ€ì¼ ê³ ì¹¨3</div>
    <div class="mch">ë¯¼ì±„ í—¤ì–´ìŠ¤íƒ€ì¼ ê³ ì¹¨4</div>


    <!-- 
        name=value í˜•íƒœëŠ” attr ë©”ì†Œë“œ
        checked ì²˜ëŸ¼ í˜¼ìë§Œ ì˜¤ëŠ” ì†ì„±ì€ prop ë©”ì†Œë“œ
    -->
    <input type="checkbox" checked>
    <input type="text" value="ë©”ë¡±" readonly>

</body>
<script>
    (function () {
        // ê´œíˆ newë¥¼ ì—†ì• ì£¼ë©´ í¸í•˜ê²Œ ì“¸ ê²ƒ ê°™ìŒ!        
        var $ = function $(pSel) {
            return new myDom(pSel);
        }
        // classë¡œ ì“¸ myDom
        function myDom(pSel) {
            this.pSel = pSel; //ì„ íƒìë¥¼ ì €ì¥í•´ë‘ !
            var elems = document.querySelectorAll(pSel);
            //ì˜®ê²¨ë‹´ê¸°
            this.length = elems.length; //length ì†ì„± ì§€ì •
            for (let i = 0; i < this.length; i++) { // ì˜®ê²¨ë‹´ê¸°, ë°°ì—´ì‹ ì ‘ê·¼ë²•
                this[i] = elems[i];
            }
            return this; //ìƒëµê°€ëŠ¥, classì˜ ì˜ë¯¸ë¡œ ì“°ëŠ” function í‚¤ì›Œë“œëŠ” ì´ê²Œ ìƒëµë˜ì–´ ìˆìŒ
        }

        window.$ = $; // ìì£¼ ë³´ë©´ ë§˜ì´ í¸í•¨

        $.fn = myDom.prototype; // myDom.prototypeì„ ì¦‰ê°ì‹¤í–‰í•¨ìˆ˜ ë°”ê¹¥ì—ì„œ $.fnìœ¼ë¡œ ì ‘ì´‰ ê°€ëŠ¥ 

    })();

    //ì œì´ì¿¼ë¦¬ì—ì„œ eq ë©”ì†Œë“œ ì œì¸ë‹ ê°€ëŠ¥
    $.fn.eq = function (pIndex) { //ì´ê±´ ë©”ì†Œë“œ ì²´ì¸ë‹ì´ ì•ˆë ê¹Œ?
        //return this[pIndex]; //ì½ê¸° ê¸°ëŠ¥ë°–ì— ëª»í•¨
        console.log("ë””ë²„ê¹…:", this, this[pIndex]);
        this[0] = this[pIndex]; //ì„ íƒëœ ì–˜ë¥¼ ë§¨ ì•ìœ¼ë¡œ ì˜®ê¹€!
        for (var i = 1; i < this.length; i++) {
            delete this[i]; //ë‚˜ë¨¸ì§€ë¥¼ ë²„ë¦¼
        };
        this.length = 1;    //ì„ íƒëœ ì• ëŠ” ì´ì œ 1ê°œ!
        return this; // ë©”ì†Œë“œ ì²´ì¸ë‹ì„ ìœ„í•´ì„œ í•„ìš”!!!

    }

    //eqê°€ ê°€ì§€ê³  ìˆëŠ” ê±¸ 1ê°œë¡œ ë§Œë“¤ê¸° ë•Œë¬¸ì—, ì›ë˜ ê±¸ë¡œ ëŒë¦¬ëŠ” ë©”ì†Œë“œ 
    $.fn.end = function () {
        //ì‹¤ì œ jQueryëŠ” ëª¨ë‘ ë³„ë„ ì €ì¥í•´ë‘ê³  ìˆìŒ(ì¡°ê¸ˆ ë¬´ê±°ì›Œì§)!
        //ì—¬ê¸°ì„  í•„ìš”í•  ë•Œ ìƒì„±í•˜ëŠ” ê±¸ë¡œ!
        return $(this.pSel);    // ê°ì²´ë¥¼ ë‹¤ì‹œ ìƒì„±í•´ì„œ ëŒë ¤ì¤Œ
    }



    //style ê°ì²´ ì œì–´ css ë©”ì†Œë“œ
    //pArg1ì€ ë¬´ì¡°ê±´ ìˆì–´ì•¼ í•˜ê³ , pArg2ê°€ ì—†ì„ ë•Œ(ì½ê¸°), ë¬¸ìì—´ì¼ë•Œ(ì „ì²´ì“°ê¸°), í•¨ìˆ˜ì¼ë•Œ(ë¶€ë¶„ì œì–´)




    $.fn.html = function (pArg) { //ë§¤ê°œë³€ìˆ˜ 1ê°œë§Œ ìˆìœ¼ë©´ ë¨!!

        if (!pArg) { //falseê°’ì´ë¼ë©´?
            return this[0].innerHTML;
        }

        if (typeof (pArg) == "string") {
            for (var i = 0; i < this.length; i++) {
                this[i].innerHTML = pArg;
            }
            return this; //ë©”ì†Œë“œ ì²´ì¸ë‹ì„ ìœ„í•´ ê°ì²´ ìì‹ ì„ ë¦¬í„´
        }


        if (typeof (pArg) == "function") {
            for (var i = 0; i < this.length; i++) {

                this[i].innerHTML = pArg.call(this[i], i, this[i].innerHTML); //ì½œë°±í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì„ í™œìš©
            }
            return this; //ë©”ì†Œë“œ ì²´ì¸ë‹ì„ ìœ„í•´ ê°ì²´ ìì‹ ì„ ë¦¬í„´
        }
        return this; //í•´ë‹¹ì‚¬í•­ ì—†ì„ ë•Œë„, ë©”ì†Œë“œ ì²´ì¸ë‹ ì§€ì›
    }



    $.fn.css = function (pArg1, pArg2) { //ë§¤ê°œë³€ìˆ˜ 2ê°œ í•„ìš”

        if (!pArg2) {
            return this[0].style[pArg1]; //ë°°ì—´ì‹ì ‘ê·¼ë²•
        }

        if (typeof (pArg2) == "string") {
            for (var i = 0; i < this.length; i++) {
                this[i].style[pArg1] = pArg2;
            }
            return this;
        }

        if (typeof (pArg2) == "function") {
            for (var i = 0; i < this.length; i++) {
                this[i].style[pArg1] = pArg2.call(this[i], i, this[i].style[pArg1]);
            }
            return this;
        }

    }

    //$.eachì™€ í—·ê°ˆë¦¬ì§€ ë§ê¸°!
    $.fn.each = function (pCb) {
        for (var i = 0; i < this.length; i++) {
            pCb.call(this[i], i, this[i]);
        }
        return this; //ë©”ì†Œë“œ ì²´ì¸ë‹
    }


    //ğŸ’¥ğŸ’¥jQuery ì‚¬ìš© ì‹œ ê¼­ ì£¼ì˜í•  ê²ƒ (ì´ê²ƒìœ¼ë¡œ í‰ê°€ê°€ ë¨!, ì œëŒ€ë¡œ ì´í•´í•˜ê³  ì“°ëŠ”ì§€..)
    //ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì•ˆë˜ë„ë¡ ê¼­ ë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•˜ê¸°
    //í•œë²ˆì— ì—¬ëŸ¬ê°œ ì²˜ë¦¬í•˜ê³  ëë‚¼ ë• ë©”ì†Œë“œ ì²´ì¸ë‹ì„ ì´ìš©í•´ì•¼ í•¨!
    //var $myMC3 = $(".mch"); ë³€ìˆ˜ëª… ì•ì— $ ë¶™ì„ -> ì œì´ì¿¼ë¦¬ ê°ì²´ì„ì„ ëª…ì‹œ

    /* ì•„ë˜ì™€ ê°™ì€ ì½”ë“œ ì ˆëŒ€ ì•ˆë“¤ì–´ê°€ê²Œ! ê·¸ëƒ¥ íƒˆë½.. ë‘˜ë‹¤ ë˜‘ê°™ì€ê±°ì„..! 
    $(document.ready(function(){
        $(function(){});
    }));

    $(function(){
        $(document.ready(function(){}));
    });
    */

    var myMC3 = $(".mch");

    myMC3.each(function (pIndex, pElem) {
        console.log("ì²´í¬:", pIndex, pElem);
    })

    myMC3.css("color", "blue") //ì „ì²´ ì“°ê¸°
        .css("background-color", "gray")
        .css("color", function (pIndex, pVal) {
            if (pIndex == 1) {
                return "yellow";
            }
            return pVal; //ë‚˜ë¨¸ì§„ ê·¸ëŒ€ë¡œ ì¶œë ¥
        })
        .css("color", function (pIndex, pVal) {
            if (pVal == "yellow") {
                return "black";
            }
            return pVal;
        }).html("<h1>jQuery ì •ë§ ë³„ê±° ì—†ë„¤ìš©!</h1>")


    //console.log("ëˆˆìœ¼ë¡œ ê¼­ í™•ì¸:",myMC3.html("ë©”ë¡±!"));

    myMC3.html(function (pIndex, pHTML) {
        alert("ì²´í¬1:"+this);
        console.log("thisëŠ” ", this); //window ì°í˜

        if (pIndex == 1) {
            return "<h1>ë¯¼ì±„ ë§Œë§Œì„¸~!!!</h1>";
        };
        return pHTML; //í•´ë‹¹ ì‚¬í•­ ì—†ëŠ” ì• ë“¤ì€ ì›ë˜ ê°’ ê·¸ëŒ€ë¡œ ì¶œë ¥

    //}).html(function (pIndex, pHTML) { //ë©”ì†Œë“œ ì²´ì¸ë‹!
    }).html(function(pIndex, pHTML){ //ë©”ì†Œë“œ ì²´ì¸ë‹!
        alert("ì²´í¬2:"+this); //ğŸ’¥ğŸ’¥ê¼­ ì£¼ì˜! this ì“¸ê±°ë©´ í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ê·¸ëƒ¥ functionìœ¼ë¡œ ì¨ë¼!
        if (pIndex == 3) {
            return "<h1>ë” ì´ìƒ ì¹­ì°¬í•  ê²Œ ì—†ëŠ” ë¯¼ì±„...ã… </h1>";
        }

        return pHTML;
    });


    // ğŸ’¥ attr vs prop
    // <input type="checkbox" checked>
    // <input type="text" value="ë©”ë¡±" readonly>
    // attr -> í‚¤,ë°¸ë¥˜ ê°™ì´ ìˆëŠ” ê²ƒ
    // prop -> í˜¼ì ì˜¤ëŠ” ê²ƒ








    console.log("ì§„ì§œ 1ê°œ:", myMC3.eq(2)); // ì´ê²Œ ë¬¸ì œ!!!!
    console.log("ì§„ì§œ 1ê°œ:", myMC3.eq(2).end()); // ì´ê²Œ ë¬¸ì œ!!!!
    /*     
        myMC3.eq(2)
            .html("<h1>ë‚˜ ëˆ„êµ¬ê²Œ?</h1>")
            .css("color","yellow")
            .css("font-size","3em")
            .css("background-color","black");
     */

</script>